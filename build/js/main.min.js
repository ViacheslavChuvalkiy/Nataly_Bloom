function toggleToActiveLink(e){for(var i=$(".nav__link"),s=0;s<i.length;s++)if(i[s].classList.contains("nav__link--active")){i[s].classList.remove("nav__link--active");break}e.target.classList.add("nav__link--active")}function setClick_Button_User(e){for(var i=$(".btn_user"),s=0;s<i.length;s++){i[s].addEventListener("click",ShowUserMenu_Sign_in)}for(var n=$(".menu_user_close"),s=0;s<n.length;s++)n[s].addEventListener("click",HideUserMenu_Sign_in);i=$(".user_menu_choice");for(s=0;s<i.length;s++){i[s].addEventListener("click",Choice_User_Menu)}}function ShowUserMenu_Sign_in(e){var i=$(".menu_user");i.slideToggle(5);for(var s=$(".user_menu_choice"),n=0;n<s.length;n++)(i=s[n]).classList.contains("user_menu_choice_active")&&i.classList.remove("user_menu_choice_active");Choice_User_Menu(e)}function HideUserMenu_Sign_in(e){$(".menu_registration").visible?$(".menu_registration").hide():$(".menu_sign_in").visible&&$(".menu_sign_in").hide(),$(".menu_user").hide()}function Choice_User_Menu(e){var i=$("."+e.target.value),s=$(".menu_registration"),n=$(".menu_sign_in");"menu_sign_in"==e.target.value?($(".menu_user_sign_in").css("max-height","210px"),s.hide()):($(".menu_user_registration").css("max-height","250px"),n.hide()),i.visible?i.hide():i.show()}function User_Log_in(e){Check_Users_Information_Fill();$(".user_login").val(),$(".user_pass").val()}function Check_Users_Information_Fill(){}function CreateListItems(){var e=$(".sidebar-menu");category_list=["Блузы","Рубашки","Платья","Юбки","Брюки","Джемперы","Свитеры","Кардиганы","Кофты","Пиджаки","Костюмы"];for(var i=0;i<e.length;i++){var s=e[i];if(!0!==s.classList.contains("list-stocks"))for(var n=0;n<category_list.length;n++){var r=document.createElement("li");r.classList.add("sidebar-menu"),r.classList.add("list--choice"),r.href="#";var a=document.createTextNode(list[n]);r.appendChild(a),s.appendChild(r)}}}function change_main_photo(e){var i=$(".hero-img").attr("src"),s=list_main_photo.indexOf(i);list_main_photo.length==s+1?$(".hero-img").attr("src",list_main_photo[0]):$(".hero-img").attr("src",list_main_photo[s+1])}function FillSellList(){$(".container_grid");sell_list=create_sell_list(),fill_sell_list(1)}function fix_main_menu(){var e=$(".header_mainmenu"),i=$(".sidebar"),s=$(".hero"),n=$(".span_hero");$(window).scroll(function(){187<$(this).scrollTop()?(e.addClass("fix_class_main_menu"),i.addClass("fix_class_side_bar"),s.addClass("fix_class_hero"),n.addClass("margin_top")):(e.removeClass("fix_class_main_menu"),i.removeClass("fix_class_side_bar"),s.removeClass("fix_class_hero"),n.removeClass("margin_top"))})}function create_sell_list(){return[[{id_number:"1",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/8.jpg",category:"dress"},{id_number:"2",name:"Крутое платье для выходных",old_price:"200 $",price:"155 $",scr:"images/dress/17.jpg",category:"dress"},{id_number:"3",name:"Крутое платье для выходных",old_price:"60 $",price:"55 $",scr:"images/dress/18.jpg",category:"dress"},{id_number:"4",name:"Крутое платье для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"dress"},{id_number:"5",name:"Крутое платье для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"dress"},{id_number:"6",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"dress"}],[{id_number:"7",name:"Крутая футболка для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"t-short"},{id_number:"8",name:"Крутая футболка для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"t-short"},{id_number:"9",name:"Крутая футболка для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"t-short"}]]}function fill_sell_list(e,i){var s=sell_list.length,n=6*e,r=n-6+1;if(r<s)for(var a=$(".grid_main_item"),t=0;r<=n;r++){$(a[t]);s[r],t++}}function addEventShowAddImage(){var e,i=$(".main_image_admin_form");i[0]&&this.files[0]&&((e=document.createElement("img")).src=window.URL.createObjectURL(this.files[0]),e.onload=function(){window.URL.revokeObjectURL(this.src)},i[0].appendChild(e))}function addEventShowOthersAddImage(){var e=$(".others_image_admin_form");if(e[0]&&this.files.length)for(var i=0;i<this.files.length;i++){var s=document.createElement("img");s.src=window.URL.createObjectURL(this.files[i]),s.onload=function(){window.URL.revokeObjectURL(this.src)};var n=$(".others_image_admin_form img");if(6==n.length)break;n[0]?e[0].insertBefore(s,n[0]):e[0].appendChild(s)}}function clear_photo_in_admin_page(){for(var e=$(".others_image_admin_form");e[0].firstChild;)e[0].removeChild(e[0].firstChild)}function addSideBarAdmin(){var e=$(".sidebar_admin_ul");options_list=[{name:"Добавить товар",form:"add_sale_items_form"},{name:"Изменить товар",form:"add_sale_items_form"},{name:"Удалить товар",form:"add_sale_items_form"},{name:"Настроить основною страницу",form:"add_sale_items_form"},{name:"Настроить основную страницу лукбук",form:"add_sale_items_form"},{name:"Загрузить фото на сервер",form:"add_item_photos_form"}];for(var i=e[0],s=0;s<options_list.length;s++){var n=document.createElement("li");n.classList.add("sidebar_admin_li"),n.href=options_list[s].form;var r=document.createTextNode(options_list[s].name);n.appendChild(r),i.appendChild(n)}}function slide_active_admin_form(e){for(var i=e.target.href,s=$(".admin_form"),n=0;n<=s.length;n++){var r=s[n];r&&r.classList.contains("active_admin_form")&&r.classList.remove("active_admin_form")}$("."+i)[0].classList.add("active_admin_form")}var sell_list,list_main_photo,user_log_in,category_list;window.myProject={},window.onload=function(){for(var e=$(".nav__link"),i=0;i<e.length;i++){e[i].addEventListener("click",toggleToActiveLink)}CreateListItems(),list_main_photo=["images/carusel/img_1.jpg","images/carusel/img_2.jpg","images/carusel/img_3.jpg","images/carusel/img_4.jpg"],addSideBarAdmin(),setInterval(change_main_photo,2e4),setClick_Button_User(),$("#input_img")[0].addEventListener("input",addEventShowAddImage,!1),$("#input_other_img")[0].addEventListener("input",addEventShowOthersAddImage,!1),$("#clear_photo")[0].addEventListener("click",clear_photo_in_admin_page,!1);for(var s=$(".sidebar_admin_li"),n=0;n<=s.length;n++)s[n].addEventListener("click",slide_active_admin_form)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiLCJoZXJvLmpzIiwiYWRtaW5fcGFnZS5qcyIsIm1haW4uanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbInRvZ2dsZVRvQWN0aXZlTGluayIsImV2ZW50IiwibGlua3MiLCIkIiwiaW5kZXgiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsInRhcmdldCIsImFkZCIsInNldENsaWNrX0J1dHRvbl9Vc2VyIiwiYnV0dG9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJTaG93VXNlck1lbnVfU2lnbl9pbiIsIm1lbnVfdXNlcl9jbG9zZSIsIkhpZGVVc2VyTWVudV9TaWduX2luIiwiQ2hvaWNlX1VzZXJfTWVudSIsInRlbXAiLCJzbGlkZVRvZ2dsZSIsInVzZXJfbWVudV9jaG9pY2VzIiwidmlzaWJsZSIsImhpZGUiLCJ0ZW1wX3ZhbHVlIiwidmFsdWUiLCJtZW51X3JlZ2lzdHJhdGlvbiIsIm1lbnVfc2lnbl9pbiIsImNzcyIsInNob3ciLCJVc2VyX0xvZ19pbiIsIkNoZWNrX1VzZXJzX0luZm9ybWF0aW9uX0ZpbGwiLCJ2YWwiLCJDcmVhdGVMaXN0SXRlbXMiLCJtYWluX19saXN0IiwiY2F0ZWdvcnlfbGlzdCIsImkiLCJpdGVtIiwiYyIsImNoaWxkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsInRleHQiLCJjcmVhdGVUZXh0Tm9kZSIsImxpc3QiLCJhcHBlbmRDaGlsZCIsImNoYW5nZV9tYWluX3Bob3RvIiwiaGVyb3NlY3Rpb24iLCJhdHRyIiwiaW5kZXhfY3VycmVudF9pbWciLCJsaXN0X21haW5fcGhvdG8iLCJpbmRleE9mIiwiRmlsbFNlbGxMaXN0Iiwic2VsbF9saXN0IiwiY3JlYXRlX3NlbGxfbGlzdCIsImZpbGxfc2VsbF9saXN0IiwiZml4X21haW5fbWVudSIsImVsZW1fbWVudSIsImVsZW1fc2lkZV9iYXIiLCJlbGVtX2hlcm8iLCJzcGFuX2hlcm8iLCJ3aW5kb3ciLCJzY3JvbGwiLCJ0aGlzIiwic2Nyb2xsVG9wIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImlkX251bWJlciIsIm5hbWUiLCJvbGRfcHJpY2UiLCJwcmljZSIsInNjciIsImNhdGVnb3J5IiwicGFnZV9udW1iZXIiLCJzZWxsX2NhdGVnb3J5IiwiY291bnRzX2l0ZW1zIiwibWF4X2l0ZW1zX29uX3BhZ2UiLCJtaW5faXRlbXNfb25fcGFnZSIsImdyaWRfbWFpbl9pdGVtcyIsImFkZEV2ZW50U2hvd0FkZEltYWdlIiwiaW1nIiwiYWRtaW5faW1nX2Jsb2NrIiwiZmlsZXMiLCJzcmMiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJvbmxvYWQiLCJyZXZva2VPYmplY3RVUkwiLCJhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSIsImFkbWluX2ltYWdlc19ibG9jayIsImltZ19lbGVtIiwiaW5zZXJ0QmVmb3JlIiwiY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImFkZFNpZGVCYXJBZG1pbiIsIm9wdGlvbnNfbGlzdCIsImZvcm0iLCJzbGlkZV9hY3RpdmVfYWRtaW5fZm9ybSIsImN1cnJlbnRfZm9ybSIsImFkbWluX2Zvcm1zIiwidGVtcF9mb3JtIiwidXNlcl9sb2dfaW4iLCJteVByb2plY3QiLCJuYXZfaXRlbSIsInNldEludGVydmFsIiwiYWRtaW5faXRlbXNfbGkiXSwibWFwcGluZ3MiOiJBQUNBLFNBQUFBLG1CQUFBQyxHQUlBLElBRkEsSUFBQUMsRUFBQUMsRUFBQSxjQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFHLE9BQUFELElBQ0EsR0FBQUYsRUFBQUUsR0FBQUUsVUFBQUMsU0FBQSxxQkFBQSxDQUNBTCxFQUFBRSxHQUFBRSxVQUFBRSxPQUFBLHFCQUNBLE1BSUFQLEVBQUFRLE9BQUFILFVBQUFJLElBQUEscUJBS0EsU0FBQUMscUJBQUFWLEdBSUEsSUFGQSxJQUFBVyxFQUFBVCxFQUFBLGFBRUFDLEVBQUEsRUFBQUEsRUFBQVEsRUFBQVAsT0FBQUQs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QSxnQkFBQSxHQUFBVSxpQkFBQSxRQUFBK0UsMkJBQUEsR0FJQSxJQUZBLElBQUFjLEVBQUF2RyxFQUFBLHFCQUVBZ0MsRUFBQSxFQUFBQSxHQUFBdUUsRUFBQXJHLE9BQUE4QixJQUNBdUUsRUFBQXZFLEdBQUF0QixpQkFBQSxRQUFBcUYiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gdG9nZ2xlVG9BY3RpdmVMaW5rIChldmVudCkge1xyXG5cclxuICAgIHZhciBsaW5rcyA9ICQoJy5uYXZfX2xpbmsnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGlua3MubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgaWYgKGxpbmtzW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ25hdl9fbGluay0tYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgbGlua3NbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ25hdl9fbGluay0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnbmF2X19saW5rLS1hY3RpdmUnKTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZXRDbGlja19CdXR0b25fVXNlcihldmVudCkge1xyXG5cclxuICAgIHZhciBidXR0b25zID0gJCgnLmJ0bl91c2VyJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGJ1dHRvbnMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB2YXIgdGVtcF9idG4gPSBidXR0b25zW2luZGV4XTtcclxuICAgICAgICB0ZW1wX2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIFNob3dVc2VyTWVudV9TaWduX2luKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbWVudV91c2VyX2Nsb3NlID0gJCgnLm1lbnVfdXNlcl9jbG9zZScpO1xyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG1lbnVfdXNlcl9jbG9zZS5sZW5ndGg7IGluZGV4KysgKSB7XHJcbiAgICAgICAgbWVudV91c2VyX2Nsb3NlW2luZGV4XS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIEhpZGVVc2VyTWVudV9TaWduX2luKTtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b25zID0gJCgnLnVzZXJfbWVudV9jaG9pY2UnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYnV0dG9ucy5sZW5ndGg7IGluZGV4KysgKSB7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wX2J0biA9IGJ1dHRvbnNbaW5kZXhdO1xyXG4gICAgICAgIHRlbXBfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQ2hvaWNlX1VzZXJfTWVudSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBTaG93VXNlck1lbnVfU2lnbl9pbihldmVudCkge1xyXG5cclxuICAgIHZhciB0ZW1wID0gJCgnLm1lbnVfdXNlcicpO1xyXG4gICAgdGVtcC5zbGlkZVRvZ2dsZSg1KTtcclxuXHJcbiAgICB2YXIgdXNlcl9tZW51X2Nob2ljZXMgPSAkKCcudXNlcl9tZW51X2Nob2ljZScpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB1c2VyX21lbnVfY2hvaWNlcy5sZW5ndGg7IGluZGV4KysgKSB7XHJcblxyXG4gICAgICAgIHRlbXAgPSB1c2VyX21lbnVfY2hvaWNlc1tpbmRleF07XHJcbiAgICAgICAgaWYodGVtcC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXJfbWVudV9jaG9pY2VfYWN0aXZlJykpe1xyXG4gICAgICAgICAgICB0ZW1wLmNsYXNzTGlzdC5yZW1vdmUoJ3VzZXJfbWVudV9jaG9pY2VfYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENob2ljZV9Vc2VyX01lbnUoZXZlbnQpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gSGlkZVVzZXJNZW51X1NpZ25faW4oZXZlbnQpIHtcclxuXHJcbiAgICBpZiAoJCgnLm1lbnVfcmVnaXN0cmF0aW9uJykudmlzaWJsZSl7XHJcbiAgICAgICAgJCgnLm1lbnVfcmVnaXN0cmF0aW9uJykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYoJCgnLm1lbnVfc2lnbl9pbicpLnZpc2libGUpe1xyXG4gICAgICAgICQoJy5tZW51X3NpZ25faW4nKS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLm1lbnVfdXNlcicpLmhpZGUoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIENob2ljZV9Vc2VyX01lbnUoZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgdGVtcF92YWx1ZSA9ICQoJy4nICsgZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgIHZhciBtZW51X3JlZ2lzdHJhdGlvbiA9ICQoJy5tZW51X3JlZ2lzdHJhdGlvbicpO1xyXG4gICAgdmFyIG1lbnVfc2lnbl9pbiA9ICQoJy5tZW51X3NpZ25faW4nKTtcclxuXHJcbiAgICBpZihldmVudC50YXJnZXQudmFsdWUgPT0gJ21lbnVfc2lnbl9pbicpe1xyXG5cclxuICAgICAgICAkKCcubWVudV91c2VyX3NpZ25faW4nKS5jc3MoJ21heC1oZWlnaHQnLCcyMTBweCcpO1xyXG4gICAgICAgIG1lbnVfcmVnaXN0cmF0aW9uLmhpZGUoKTtcclxuXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAkKCcubWVudV91c2VyX3JlZ2lzdHJhdGlvbicpLmNzcygnbWF4LWhlaWdodCcsJzI1MHB4Jyk7XHJcbiAgICAgICAgbWVudV9zaWduX2luLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0ZW1wX3ZhbHVlLnZpc2libGUpe1xyXG4gICAgICAgIHRlbXBfdmFsdWUuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGVtcF92YWx1ZS5zaG93KCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBVc2VyX0xvZ19pbihldmVudCkge1xyXG5cclxuICAgIENoZWNrX1VzZXJzX0luZm9ybWF0aW9uX0ZpbGwoKTtcclxuXHJcbiAgICB2YXIgdGVtcF91c2VyID0ge1xyXG4gICAgICAgIGxvZ2luIDogJCgnLnVzZXJfbG9naW4nKS52YWwoKSxcclxuICAgICAgICBwYXNzd29yZDogJCgnLnVzZXJfcGFzcycpLnZhbCgpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vQ29ubmVjdF91c2Vycyh0ZW1wX3VzZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDaGVja19Vc2Vyc19JbmZvcm1hdGlvbl9GaWxsKCkge1xyXG5cclxufVxyXG4iLCJcclxuZnVuY3Rpb24gQ3JlYXRlTGlzdEl0ZW1zKCkge1xyXG5cclxuICAgIHZhciBtYWluX19saXN0ID0gJCgnLnNpZGViYXItbWVudScpO1xyXG4gICAgY2F0ZWdvcnlfbGlzdCA9IFsn0JHQu9GD0LfRiycsICfQoNGD0LHQsNGI0LrQuCcsICfQn9C70LDRgtGM0Y8nLCAn0K7QsdC60LgnLCAn0JHRgNGO0LrQuCcsICfQlNC20LXQvNC/0LXRgNGLJywgJ9Ch0LLQuNGC0LXRgNGLJywgJ9Ca0LDRgNC00LjQs9Cw0L3RiycsICfQmtC+0YTRgtGLJywgJ9Cf0LjQtNC20LDQutC4JywgJ9Ca0L7RgdGC0Y7QvNGLJ107XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGk8IG1haW5fX2xpc3QubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgdmFyIGl0ZW0gPSBtYWluX19saXN0W2ldO1xyXG5cclxuICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2xpc3Qtc3RvY2tzJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBjID0wOyBjIDwgY2F0ZWdvcnlfbGlzdC5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzaWRlYmFyLW1lbnUnKTtcclxuICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnbGlzdC0tY2hvaWNlJyk7XHJcbiAgICAgICAgICAgIGNoaWxkLmhyZWYgPSAnIyc7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGlzdFtjXSk7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHJcbiAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY2hpbGQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlX21haW5fcGhvdG8oZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgaGVyb3NlY3Rpb24gPSAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIpO1xyXG5cclxuICAgIHZhciBpbmRleF9jdXJyZW50X2ltZyA9IGxpc3RfbWFpbl9waG90by5pbmRleE9mKGhlcm9zZWN0aW9uKTtcclxuXHJcbiAgIGlmIChsaXN0X21haW5fcGhvdG8ubGVuZ3RoID09IGluZGV4X2N1cnJlbnRfaW1nICsgMSkge1xyXG5cclxuICAgICAgICQoJy5oZXJvLWltZycpLmF0dHIoXCJzcmNcIiwgbGlzdF9tYWluX3Bob3RvWzBdKTtcclxuICAgfVxyXG4gICBlbHNlIHtcclxuICAgICAgICQoJy5oZXJvLWltZycpLmF0dHIoXCJzcmNcIiwgbGlzdF9tYWluX3Bob3RvW2luZGV4X2N1cnJlbnRfaW1nICsgMV0pO1xyXG4gICAgICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gRmlsbFNlbGxMaXN0KCkge1xyXG5cclxuICAgIHZhciBtYWluX19saXN0ID0gJCgnLmNvbnRhaW5lcl9ncmlkJyk7XHJcbiAgICBzZWxsX2xpc3QgPSBjcmVhdGVfc2VsbF9saXN0KCk7XHJcbiAgICBmaWxsX3NlbGxfbGlzdCgxKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpeF9tYWluX21lbnUoKSB7XHJcblxyXG4gICAgdmFyIGVsZW1fbWVudSA9ICQoJy5oZWFkZXJfbWFpbm1lbnUnKTtcclxuICAgIHZhciBlbGVtX3NpZGVfYmFyID0gJCgnLnNpZGViYXInKTtcclxuICAgIHZhciBlbGVtX2hlcm8gPSAkKCcuaGVybycpO1xyXG4gICAgdmFyIHNwYW5faGVybyA9ICQoJy5zcGFuX2hlcm8nKTtcclxuXHJcblxyXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gMTg3KSB7XHJcbiAgICAgICAgICAgIGVsZW1fbWVudS5hZGRDbGFzcyhcImZpeF9jbGFzc19tYWluX21lbnVcIik7XHJcbiAgICAgICAgICAgIGVsZW1fc2lkZV9iYXIuYWRkQ2xhc3MoXCJmaXhfY2xhc3Nfc2lkZV9iYXJcIik7XHJcbiAgICAgICAgICAgIGVsZW1faGVyby5hZGRDbGFzcyhcImZpeF9jbGFzc19oZXJvXCIpO1xyXG4gICAgICAgICAgICBzcGFuX2hlcm8uYWRkQ2xhc3MoXCJtYXJnaW5fdG9wXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1fbWVudS5yZW1vdmVDbGFzcyhcImZpeF9jbGFzc19tYWluX21lbnVcIik7XHJcbiAgICAgICAgICAgIGVsZW1fc2lkZV9iYXIucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3Nfc2lkZV9iYXJcIik7XHJcbiAgICAgICAgICAgIGVsZW1faGVyby5yZW1vdmVDbGFzcyhcImZpeF9jbGFzc19oZXJvXCIpO1xyXG4gICAgICAgICAgICBzcGFuX2hlcm8ucmVtb3ZlQ2xhc3MoXCJtYXJnaW5fdG9wXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVfc2VsbF9saXN0KCkge1xyXG5cclxuICAgIHZhciBpdGVtMSA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiMVwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIzMDAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjI1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy84LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW0yID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCIyXCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjIwMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMTU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE3LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW0zID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCIzXCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjYwICRcIixcclxuICAgICAgICBwcmljZTogXCI1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xOC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtNCA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiNFwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI4MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTAuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTUgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjVcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMTIwICRcIixcclxuICAgICAgICBwcmljZTogXCIxMDUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTQuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTYgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjZcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTYuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTcgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjdcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0LDRjyDRhNGD0YLQsdC+0LvQutCwINC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjgwICRcIixcclxuICAgICAgICBwcmljZTogXCI1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xMC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJ0LXNob3J0XCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW04ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI4XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIxMjAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjEwNSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJ0LXNob3J0XCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW05ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI5XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIzMDAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjI1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNi5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJ0LXNob3J0XCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGRyZXNzID0gW2l0ZW0xLGl0ZW0yLGl0ZW0zLGl0ZW00LGl0ZW01LGl0ZW02XTtcclxuICAgIHZhciB0X3Nob3J0ID0gW2l0ZW03LGl0ZW04LGl0ZW05XTtcclxuICAgIHJldHVybiBbZHJlc3MsdF9zaG9ydF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGxfc2VsbF9saXN0KHBhZ2VfbnVtYmVyLHNlbGxfY2F0ZWdvcnkpIHtcclxuXHJcbiAgICB2YXIgY291bnRzX2l0ZW1zID0gc2VsbF9saXN0Lmxlbmd0aDtcclxuICAgIHZhciBtYXhfaXRlbXNfb25fcGFnZSA9IDYgKiBwYWdlX251bWJlcjtcclxuICAgIHZhciBtaW5faXRlbXNfb25fcGFnZSA9IG1heF9pdGVtc19vbl9wYWdlIC0gNiArIDE7XHJcblxyXG4gICAgaWYgKGNvdW50c19pdGVtcyA+IG1pbl9pdGVtc19vbl9wYWdlKSB7XHJcblxyXG4gICAgdmFyIGdyaWRfbWFpbl9pdGVtcyA9ICQoJy5ncmlkX21haW5faXRlbScpO1xyXG4gICAgdmFyIGkgPSAwO1xyXG5cclxuICAgIGZvciAobWluX2l0ZW1zX29uX3BhZ2U7IG1pbl9pdGVtc19vbl9wYWdlIDw9IG1heF9pdGVtc19vbl9wYWdlOyBtaW5faXRlbXNfb25fcGFnZSsrKSB7XHJcblxyXG4gICAgdmFyIGFycl9zZWxsX2Jsb2NrID0gJChncmlkX21haW5faXRlbXNbaV0pO1xyXG5cclxuICAgIGlmIChjb3VudHNfaXRlbXNbbWluX2l0ZW1zX29uX3BhZ2VdKSB7XHJcblxyXG5cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGkrKztcclxuICAgIH1cclxuXHJcbiAgICB9XHJcbn0iLCJcclxuZnVuY3Rpb24gYWRkRXZlbnRTaG93QWRkSW1hZ2UoKSB7XHJcblxyXG4gICAgdmFyIGFkbWluX2ltZ19ibG9jayA9ICQoJy5tYWluX2ltYWdlX2FkbWluX2Zvcm0nKTtcclxuXHJcbiAgICBpZihhZG1pbl9pbWdfYmxvY2tbMF0gJiYgdGhpcy5maWxlc1swXSkge1xyXG5cclxuICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWcuc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5maWxlc1swXSk7XHJcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnNyYyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkbWluX2ltZ19ibG9ja1swXS5hcHBlbmRDaGlsZChpbWcpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRXZlbnRTaG93T3RoZXJzQWRkSW1hZ2UoKSB7XHJcblxyXG4gICAgdmFyIGFkbWluX2ltYWdlc19ibG9jayA9ICQoJy5vdGhlcnNfaW1hZ2VfYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIGlmKGFkbWluX2ltYWdlc19ibG9ja1swXSAmJiB0aGlzLmZpbGVzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5maWxlcy5sZW5ndGg7aSsrKXtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICBpbWcuc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5maWxlc1tpXSk7XHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnNyYyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1nX2VsZW0gPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0gaW1nJylcclxuXHJcbiAgICAgICAgICAgIGlmIChpbWdfZWxlbS5sZW5ndGggPT0gNikge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGltZ19lbGVtWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBhZG1pbl9pbWFnZXNfYmxvY2tbMF0uaW5zZXJ0QmVmb3JlKGltZyxpbWdfZWxlbVswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhZG1pbl9pbWFnZXNfYmxvY2tbMF0uYXBwZW5kQ2hpbGQoaW1nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyX3Bob3RvX2luX2FkbWluX3BhZ2UoKSB7XHJcblxyXG4gICAgdmFyIGFkbWluX2ltYWdlc19ibG9jayA9ICQoJy5vdGhlcnNfaW1hZ2VfYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIHdoaWxlIChhZG1pbl9pbWFnZXNfYmxvY2tbMF0uZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGFkbWluX2ltYWdlc19ibG9ja1swXS5yZW1vdmVDaGlsZChhZG1pbl9pbWFnZXNfYmxvY2tbMF0uZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFNpZGVCYXJBZG1pbigpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5zaWRlYmFyX2FkbWluX3VsJyk7XHJcbiAgICBvcHRpb25zX2xpc3QgPSBbe25hbWU6ICfQlNC+0LHQsNCy0LjRgtGMINGC0L7QstCw0YAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiAnYWRkX3NhbGVfaXRlbXNfZm9ybSd9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAn0JjQt9C80LXQvdC40YLRjCDRgtC+0LLQsNGAJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogJ2FkZF9zYWxlX2l0ZW1zX2Zvcm0nfSxcclxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ9Cj0LTQsNC70LjRgtGMINGC0L7QstCw0YAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiAnYWRkX3NhbGVfaXRlbXNfZm9ybSd9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAn0J3QsNGB0YLRgNC+0LjRgtGMINC+0YHQvdC+0LLQvdC+0Y4g0YHRgtGA0LDQvdC40YbRgycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm06ICdhZGRfc2FsZV9pdGVtc19mb3JtJ30sXHJcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICfQndCw0YHRgtGA0L7QuNGC0Ywg0L7RgdC90L7QstC90YPRjiDRgdGC0YDQsNC90LjRhtGDINC70YPQutCx0YPQuicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm06ICdhZGRfc2FsZV9pdGVtc19mb3JtJ30sXHJcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICfQl9Cw0LPRgNGD0LfQuNGC0Ywg0YTQvtGC0L4g0L3QsCDRgdC10YDQstC10YAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiAnYWRkX2l0ZW1fcGhvdG9zX2Zvcm0nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICB2YXIgaXRlbSA9IG1haW5fX2xpc3RbMF07XHJcblxyXG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgb3B0aW9uc19saXN0Lmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ3NpZGViYXJfYWRtaW5fbGknKTtcclxuICAgICAgICAgICAgY2hpbGQuaHJlZiA9IG9wdGlvbnNfbGlzdFtjXS5mb3JtO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcHRpb25zX2xpc3RbY10ubmFtZSk7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHJcbiAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzbGlkZV9hY3RpdmVfYWRtaW5fZm9ybShldmVudCkge1xyXG5cclxuICAgIHZhciBjdXJyZW50X2Zvcm0gPSBldmVudC50YXJnZXQuaHJlZjtcclxuXHJcbiAgICB2YXIgYWRtaW5fZm9ybXMgPSAkKCcuYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGFkbWluX2Zvcm1zLmxlbmd0aDsgaSsrICl7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wX2Zvcm0gPSBhZG1pbl9mb3Jtc1tpXTtcclxuXHJcbiAgICAgICAgaWYoIXRlbXBfZm9ybSl7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGVtcF9mb3JtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlX2FkbWluX2Zvcm0nKSl7XHJcbiAgICAgICAgICAgIHRlbXBfZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmVfYWRtaW5fZm9ybScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBhY3RpdmVfZm9ybSA9ICQoJy4nICsgY3VycmVudF9mb3JtKTtcclxuICAgIGFjdGl2ZV9mb3JtWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZV9hZG1pbl9mb3JtJyk7XHJcbn0iLCJcclxudmFyIHNlbGxfbGlzdDtcclxuXHJcbnZhciBsaXN0X21haW5fcGhvdG87XHJcblxyXG52YXIgdXNlcl9sb2dfaW47XHJcblxyXG52YXIgY2F0ZWdvcnlfbGlzdDtcclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIG5hdl9pdGVtID0gJCgnLm5hdl9fbGluaycpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBuYXZfaXRlbS5sZW5ndGg7IGluZGV4KysgKSB7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wID0gbmF2X2l0ZW1baW5kZXhdO1xyXG4gICAgICAgIHRlbXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVUb0FjdGl2ZUxpbmspO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKkxpc3QgKi9cclxuXHJcbiAgICBDcmVhdGVMaXN0SXRlbXMoKTtcclxuICAgIENyZWF0ZU1haW5QaG90b0xpc3QoKTtcclxuICAgIGFkZFNpZGVCYXJBZG1pbigpO1xyXG4gICAgc2V0SW50ZXJ2YWwoY2hhbmdlX21haW5fcGhvdG8sMjAwMDApO1xyXG5cclxuICAgIHNldENsaWNrX0J1dHRvbl9Vc2VyKCk7XHJcbiAgICAvKmZpeF9tYWluX21lbnUoKTtcclxuICAgIEZpbGxTZWxsTGlzdCgpOyovXHJcblxyXG4gICAgZnVuY3Rpb24gQ3JlYXRlTWFpblBob3RvTGlzdCgpIHtcclxuICAgICAgICBsaXN0X21haW5fcGhvdG8gPSBbXCJpbWFnZXMvY2FydXNlbC9pbWdfMS5qcGdcIixcImltYWdlcy9jYXJ1c2VsL2ltZ18yLmpwZ1wiLFwiaW1hZ2VzL2NhcnVzZWwvaW1nXzMuanBnXCIsXCJpbWFnZXMvY2FydXNlbC9pbWdfNC5qcGdcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLy9BZG1pbiBwYWdlLy9cclxuICAgICQoJyNpbnB1dF9pbWcnKVswXS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsYWRkRXZlbnRTaG93QWRkSW1hZ2UsZmFsc2UpO1xyXG4gICAgJCgnI2lucHV0X290aGVyX2ltZycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JyxhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSxmYWxzZSk7XHJcbiAgICAkKCcjY2xlYXJfcGhvdG8nKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSxmYWxzZSk7XHJcblxyXG4gICAgdmFyIGFkbWluX2l0ZW1zX2xpID0gJCgnLnNpZGViYXJfYWRtaW5fbGknKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPTA7IGkgPD0gYWRtaW5faXRlbXNfbGkubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGFkbWluX2l0ZW1zX2xpW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzbGlkZV9hY3RpdmVfYWRtaW5fZm9ybSlcclxuICAgIH07XHJcblxyXG59KTtcclxuXHJcbiIsIndpbmRvdy5teVByb2plY3QgPSB7fTsiXX0=
